
set(QT_PREFIX Qt5)
set(QT_MODULES
    Widgets
    Core
    Gui)

set(QT_INCLUDE_DIR ${CMAKE_CURRENT_SOURCE_DIR}/include CACHE STRING "" FORCE)

set(QT_LIBRARY_DIR ${CMAKE_CURRENT_SOURCE_DIR}/lib)
set(QT_LIBRARIES_FILES "")
foreach(VAR ${QT_MODULES})
	list(APPEND QT_LIBRARIES_FILES "${QT_LIBRARY_DIR}/${QT_PREFIX}${VAR}.lib")
endforeach()
set(QT_LIBRARIES ${QT_LIBRARIES_FILES} CACHE STRING "" FORCE)

set(QT_BIN_DIR ${CMAKE_CURRENT_SOURCE_DIR}/bin)
set(QT_SHARED_FILES "")
foreach(VAR ${QT_MODULES})
	list(APPEND QT_SHARED_FILES "${QT_BIN_DIR}/${QT_PREFIX}${VAR}.dll")
endforeach()
set(QT_SHARED ${QT_SHARED_FILES} CACHE STRING "" FORCE)

macro(AddQtDependencies TARGET)
	target_link_libraries(${TARGET} ${QT_LIBRARIES})
	message("QT_LIBRARIES ${QT_LIBRARIES}")
    foreach(VAR ${QT_SHARED})
    	DeployFileToTarget(${VAR} ${TARGET})
    endforeach()
endmacro()
